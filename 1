<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Crypto Runner MVP</title>
  <style>
    body {
      margin: 0;
      background: #0f172a;
      overflow: hidden;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: #020617;
    }
  </style>
</head>
<body>

<canvas id="game" width="800" height="400"></canvas>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

let player = {
  x: 50,
  y: 300,
  w: 30,
  h: 30,
  vy: 0,
  onGround: false
};

const gravity = 0.8;

const platforms = [
  { x: 0, y: 350, w: 800, h: 50 },
  { x: 300, y: 280, w: 120, h: 20 },
  { x: 520, y: 230, w: 120, h: 20 }
];

const coins = [
  { x: 330, y: 240, collected: false },
  { x: 560, y: 190, collected: false }
];

let score = 0;

function update() {
  player.vy += gravity;
  player.y += player.vy;
  player.onGround = false;

  platforms.forEach(p => {
    if (
      player.x < p.x + p.w &&
      player.x + player.w > p.x &&
      player.y + player.h <= p.y + 10 &&
      player.y + player.h + player.vy >= p.y
    ) {
      player.y = p.y - player.h;
      player.vy = 0;
      player.onGround = true;
    }
  });

  coins.forEach(c => {
    if (
      !c.collected &&
      player.x < c.x + 20 &&
      player.x + player.w > c.x &&
      player.y < c.y + 20 &&
      player.y + player.h > c.y
    ) {
      c.collected = true;
      score++;
    }
  });
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // игрок
  ctx.fillStyle = '#22c55e';
  ctx.fillRect(player.x, player.y, player.w, player.h);

  // платформы
  ctx.fillStyle = '#334155';
  platforms.forEach(p => ctx.fillRect(p.x, p.y, p.w, p.h));

  // монеты
  ctx.fillStyle = '#facc15';
  coins.forEach(c => {
    if (!c.collected) ctx.fillRect(c.x, c.y, 20, 20);
  });

  // счёт
  ctx.fillStyle = '#ffffff';
  ctx.font = '16px Arial';
  ctx.fillText('Crypto: ' + score, 10, 20);
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

window.addEventListener('keydown', e => {
  if (e.code === 'Space' && player.onGround) {
    player.vy = -14;
  }
});

loop();
</script>

</body>
</html>
